function kirkiArrayToObject(a){var b={};if(null!==a)for(var c=0;c<a.length;++c)void 0!==a[c]&&(b[c]=a[c]);return b}function kirkiObjectToArray(a){var b=[];if(null!==a)for(var c=0;c<a.length;++c)void 0!==a[c]&&b.push(a[c]);return b}function kirkiValidateCSSValue(a){var b=!0,c=["rem","em","ex","%","px","cm","mm","in","pt","pc","ch","vh","vw","vmin","vmax"],d=parseFloat(a),e=a.replace(d,"");return NaN===d&&(b=!1),-1===jQuery.inArray(e,c)&&(b=!1),b}function RepeaterRow(a,b){this.rowIndex=a,this.rowNumber=a+1,this.$el=b,this.$dragger=this.$el.find(".repeater-row-move"),this.$minimizer=this.$el.find(".repeater-row-minimize"),this.$remover=this.$el.find(".repeater-row-remove"),this.$number=this.$el.find(".repeater-row-number"),this.$fields=this.$el.find("input,select,textarea");var c=this;this.$minimizer.on("click",function(){c.toggleMinimize()}),this.$remover.on("click",function(){c.remove()}),this.$dragger.on("mousedown",function(){c.$el.trigger("row:start-dragging")}),this.$el.on("keyup change","input, select, textarea",function(a){c.$el.trigger("row:update",[c.getRowIndex(),jQuery(a.target).data("field"),a.target])}),this.renderNumber()}wp.customize.controlConstructor["kirki-checkbox"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.setting._value;this.container.on("change","input",function(){b=!!jQuery(this).is(":checked"),a.setting.set(b)})}}),wp.customize.controlConstructor.code=wp.customize.Control.extend({ready:function(){var a=this,b=a.container.find("#kirki-codemirror-editor-"+a.id),c=CodeMirror.fromTextArea(b[0]);if("html"==a.params.choices.language)var d={name:"htmlmixed"};else d=a.params.choices.language;c.setOption("value",a.setting._value),c.setOption("mode",d),c.setOption("lineNumbers",!0),c.setOption("theme",a.params.choices.theme),c.setOption("height",a.params.choices.height+"px"),c.on("change",function(){a.setting.set(c.getValue())}),b.parents(".accordion-section").on("click",function(){c.refresh()})}}),wp.customize.controlConstructor["color-alpha"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find(".kirki-color-control");b.val();b.wpColorPicker({change:function(c,d){setTimeout(function(){a.setting.set(b.val())},100)}})}}),wp.customize.controlConstructor.dimension=wp.customize.Control.extend({ready:function(){var a=this;!1===kirkiValidateCSSValue(a.setting._value)?jQuery(a.selector+" .input-wrapper").addClass("invalid"):jQuery(a.selector+" .input-wrapper").removeClass("invalid"),this.container.on("change keyup paste","input",function(){var b=jQuery(this).val();a.setting.set(b),!1===kirkiValidateCSSValue(b)?jQuery(a.selector+" .input-wrapper").addClass("invalid"):jQuery(a.selector+" .input-wrapper").removeClass("invalid")})}}),function(a){wp.customizerCtrlEditor={init:function(){a(window).load(function(){a("textarea.wp-editor-area").each(function(){var b,c,d=a(this),e=d.attr("id"),f=tinyMCE.get(e);f&&f.onChange.add(function(a,e){a.save(),c=f.getContent(),clearTimeout(b),b=setTimeout(function(){d.val(c).trigger("change")},500)}),d.css({visibility:"visible"}).on("keyup",function(){c=d.val(),clearTimeout(b),b=setTimeout(function(){c.trigger("change")},500)})})})}},wp.customizerCtrlEditor.init()}(jQuery),wp.customize.controlConstructor["kirki-generic"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("change keyup paste",a.params.choices.element,function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor.multicheck=wp.customize.Control.extend({ready:function(){var a=this;a.container.on("change","input",function(){var b=[],c=0;jQuery.each(a.params.choices,function(d,e){a.container.find('input[value="'+d+'"]').is(":checked")&&(b[c]=d,c++)}),a.setting.set(b),wp.customize.previewer.refresh()})}}),wp.customize.controlConstructor.number=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("input");jQuery(b).spinner(),a.params.choices.min&&jQuery(b).spinner("option","min",a.params.choices.min),a.params.choices.max&&jQuery(b).spinner("option","max",a.params.choices.max),a.params.choices.step&&("any"==a.params.choices.step?jQuery(b).spinner("option","step","0.001"):jQuery(b).spinner("option","step",a.params.choices.step)),this.container.on("change","input",function(){a.setting.set(jQuery(this).val())}),this.container.on("click","input",function(){a.setting.set(jQuery(this).val())}),this.container.on("keyup","input",function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor.palette=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor.preset=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("select");jQuery(b).selectize(),this.container.on("change","select",function(){var b=jQuery(this).val();a.setting.set(b),jQuery.each(a.params.choices,function(a,c){b==a&&jQuery.each(c.settings,function(a,b){var c=wp.customize.settings.controls[a];if(void 0===typeof c)return!0;var d=c.type;if("checkbox"==d||"switch"==d||"toggle"==d||"kirki-checkbox"==d){var e=wp.customize.control(a).container.find("input");1==b?(jQuery(e).prop("checked",!0),wp.customize.instance(a).set(!0)):(jQuery(e).prop("checked",!1),wp.customize.instance(a).set(!1))}else if("select"==d||"select2"==d||"select2-multiple"==d||"kirki-select"==d){var e=wp.customize.control(a).container.find("select"),f=jQuery(e).selectize(),g=f[0].selectize;g.setValue(b,!0),wp.customize.instance(a).set(b)}else if("slider"==d){var e=wp.customize.control(a).container.find("input");jQuery(e).prop("value",b);var h=wp.customize.control(a).container.find(".kirki_range_value .value");jQuery(h).html(b),wp.customize.instance(a).set(b)}else if("textarea"==d||"kirki-textarea"==d){var e=wp.customize.control(a).container.find("textarea");jQuery(e).prop("value",b),wp.customize(a).set(b)}else if("color-alpha"==d||"kirki-color"==d||"color"==d){var i=wp.customize.control(a).container.find(".kirki-color-control");i.attr("data-default-color",b).data("default-color",b).wpColorPicker("color",b),wp.customize.instance(a).set(b)}else if("dimension"==d){wp.customize.instance(a).set(b);var e=wp.customize.control(a).container.find("input[type=number]"),j=parseFloat(b);jQuery(e).prop("value",j);var k=wp.customize.control(a).container.find("select"),l=b.replace(parseFloat(b),"");jQuery(k).prop("value",l)}else if("multicheck"==d)for(wp.customize.instance(a).set(b),wp.customize.control(a).container.find("input").each(function(){jQuery(this).prop("checked",!1)}),index=0;index<b.length;index++){var e=wp.customize.control(a).container.find('input[value="'+b[index]+'"]');jQuery(e).prop("checked",!0)}else if("radio-buttonset"==d||"radio-image"==d||"radio"==d||"kirki-radio"==d){var e=wp.customize.control(a).container.find('input[value="'+b+'"]');jQuery(e).prop("checked",!0),wp.customize.instance(a).set(b)}else{var e=wp.customize.control(a).container.find("input");jQuery(e).prop("value",b),wp.customize.instance(a).set(b)}})}),wp.customize.previewer.refresh()})}}),wp.customize.controlConstructor["radio-buttonset"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["radio-image"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("click","input",function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-radio"]=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("change","input",function(){a.setting.set(jQuery(this).val())})}}),RepeaterRow.prototype.getRowIndex=function(){return this.rowIndex},RepeaterRow.prototype.getRowNumber=function(){return this.rowNumber},RepeaterRow.prototype.setRowNumber=function(a){this.rowNumber=a,this.renderNumber()},RepeaterRow.prototype.getElement=function(){return this.$el},RepeaterRow.prototype.setRowIndex=function(a){this.rowIndex=a,this.$el.attr("data-row",a),this.$el.data("row",a)},RepeaterRow.prototype.toggleMinimize=function(){this.$el.toggleClass("minimized"),this.$minimizer.find(".repeater-minimize").toggleClass("dashicons-arrow-up"),this.$minimizer.find(".repeater-minimize").toggleClass("dashicons-arrow-down")},RepeaterRow.prototype.minimize=function(){this.$el.addClass("minimized"),this.$minimizer.find(".repeater-minimize").removeClass("dashicons-arrow-up"),this.$minimizer.find(".repeater-minimize").addClass("dashicons-arrow-down")},RepeaterRow.prototype.remove=function(){confirm("Are you sure?")&&(this.$el.slideUp(300,function(){jQuery(this).detach()}),this.$el.trigger("row:remove",[this.getRowIndex()]))},RepeaterRow.prototype.renderNumber=function(){this.$number.text(this.getRowNumber())},wp.customize.controlConstructor.repeater=wp.customize.Control.extend({ready:function(){var a=this,b=this.params.value;if(this.settingField=this.container.find("[data-customize-setting-link]").first(),this.setValue([],!1),this.repeaterFieldsContainer=this.container.find(".repeater-fields").first(),this.currentIndex=0,this.rows=[],this.container.on("click","button.repeater-add",function(b){b.preventDefault(),a.addRow()}),this.container.on("click keypress",".repeater-field-image .upload-button",function(b){b.preventDefault(),a.$thisButton=jQuery(this),a.openFrame(b)}),this.container.on("click keypress",".repeater-field-image .remove-button",function(b){b.preventDefault(),a.$thisButton=jQuery(this),a.removeImage(b)}),this.repeaterTemplate=_.memoize(function(){var b,c={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(d){return(b=_.template(a.container.find(".customize-control-repeater-content").first().html(),null,c))(d)}}),b.length)for(var c=0;c<b.length;c++)a.addRow(b[c]);this.repeaterFieldsContainer.sortable({handle:".repeater-row-move",update:function(b,c){a.sort()}})},openFrame:function(a){wp.customize.utils.isKeydownButNotEnterEvent(a)||(this.frame||this.initFrame(),this.frame.open())},initFrame:function(){var a=this;this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:"image"}),multiple:!1,date:!1})]}),this.frame.on("select",function(b){a.selectImage()})},selectImage:function(){var a=this.frame.state().get("selection").first().toJSON(),b=a.url,c=this.$thisButton.closest(".repeater-field-image");c.find(".kirki-image-attachment").html('<img src="'+b+'">').hide().slideDown("slow"),c.find(".hidden-field").val(b),this.$thisButton.text(this.$thisButton.data("alt-label")),c.find(".remove-button").show(),c.find("input, textarea, select").trigger("change")},removeImage:function(a){if(!wp.customize.utils.isKeydownButNotEnterEvent(a)){var b=this.$thisButton.closest(".repeater-field-image"),c=b.find(".upload-button");b.find(".kirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),b.find(".hidden-field").val(""),c.text(c.data("label")),this.$thisButton.hide(),b.find("input, textarea, select").trigger("change")}},getValue:function(){return JSON.parse(decodeURI(this.setting.get()))},setValue:function(a,b){this.setting.set(encodeURI(JSON.stringify(a))),b&&this.settingField.trigger("change")},addRow:function(a){var b,c,d=this,e=d.repeaterTemplate(),f=this.getValue(),g={};if(e){if(c=jQuery.extend(!0,{},d.params.fields),a)for(b in a)a.hasOwnProperty(b)&&c.hasOwnProperty(b)&&(c[b]["default"]=a[b]);c.index=this.currentIndex,c.ControlId=this.id,e=e(c);var h=new RepeaterRow(d.currentIndex,jQuery(e).appendTo(d.repeaterFieldsContainer));h.getElement().one("row:remove",function(a,b){d.deleteRow(b)}),h.getElement().on("row:update",function(a,b,c,e){d.updateField.call(d,a,b,c,e)}),h.getElement().on("row:start-dragging",function(){for(b in d.rows)d.rows.hasOwnProperty(b)&&d.rows[b]&&d.rows[b].minimize()}),this.rows[this.currentIndex]=h;for(b in c)c.hasOwnProperty(b)&&(g[b]=c[b]["default"]);f[this.currentIndex]=g,this.setValue(f,!0),this.currentIndex++}},sort:function(){var a=this,b=this.repeaterFieldsContainer.find(".repeater-row"),c=[];b.each(function(a,b){c.push(jQuery(b).data("row"))});var d=a.getValue(),e=[],f=[];jQuery.each(c,function(b,c){e[b]=a.rows[c],e[b].setRowIndex(b),e[b].setRowNumber(b+1),f[b]=d[c]}),a.rows=e,a.setValue(f)},deleteRow:function(a){var b=this.getValue();if(b[a]){var c=this.rows[a];c&&(delete b[a],delete this.rows[a],this.setValue(b,!0))}var d=1;for(prop in this.rows)this.rows.hasOwnProperty(prop)&&this.rows[prop]&&(this.rows[prop].setRowNumber(d),d++)},updateField:function(a,b,c,d){if(this.rows[b]&&this.params.fields[c]){var e=this.params.fields[c].type,f=this.rows[b],g=this.getValue();d=jQuery(d),void 0!=typeof g[f.getRowIndex()][c]&&("checkbox"==e?g[f.getRowIndex()][c]=d.is(":checked"):g[f.getRowIndex()][c]=d.val(),this.setValue(g,!0))}}}),wp.customize.controlConstructor["kirki-select"]=wp.customize.Control.extend({ready:function(){var a=this,b=this.container.find("select"),c=parseInt(b.data("multiple"));c>1?jQuery(b).selectize({maxItems:c,plugins:["remove_button","drag_drop"]}):jQuery(b).selectize(),this.container.on("change","select",function(){if(c>1)var b=kirkiArrayToObject(jQuery(this).val());else var b=jQuery(this).val();a.setting.set(b)})}}),jQuery(document).ready(function(a){a("input[type=range]").on("mousedown",function(){value=a(this).attr("value"),a(this).mousemove(function(){value=a(this).attr("value"),a(this).closest("label").find(".kirki_range_value .value").text(value)})}),a(".kirki-slider-reset").click(function(){var b=a(this).closest("label").find("input"),c=(b.data("customize-setting-link"),b.data("reset_value"));b.val(c),b.change(),a(this).closest("label").find(".kirki_range_value .value").text(c)})}),wp.customize.controlConstructor.slider=wp.customize.Control.extend({ready:function(){var a=this;this.container.on("change","input",function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor.sortable=wp.customize.Control.extend({ready:function(){var a=this;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.sortableContainer=this.container.find("ul.sortable").first(),this.setValue(this.setting.get(),!1),this.sortableContainer.sortable().disableSelection().on("sortstop",function(b,c){a.sort()}).find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){a.sort()})},sort:function(){var a=[];this.sortableContainer.find("li").each(function(){var b=jQuery(this);b.is(".invisible")||a.push(b.data("value"))}),this.setValue(a,!0)},getValue:function(){return unserialize(this.setting.get())},setValue:function(a,b){a=serialize(a),this.setting.set(a),this.settingField.val(a),b&&this.settingField.trigger("change")}}),wp.customize.controlConstructor.spacing=wp.customize.Control.extend({ready:function(){var a=this,b={};if(a.container.has(".top").size()&&(b.top=a.setting._value.top),a.container.has(".bottom").size()&&(b.bottom=a.setting._value.bottom),a.container.has(".left").size()&&(b.left=a.setting._value.left),a.container.has(".right").size()&&(b.right=a.setting._value.right),jQuery(".customize-control-spacing select").selectize(),a.container.has(".top").size()){var c=a.container.find(".top input[type=number]").val(),d=a.container.find(".top select").val();this.container.on("change",".top input",function(){c=jQuery(this).val(),b.top=c+d,a.setting.set(b),wp.customize.previewer.refresh()}),this.container.on("change",".top select",function(){d=jQuery(this).val(),b.top=c+d,a.setting.set(b),wp.customize.previewer.refresh()})}if(a.container.has(".bottom").size()){var e=a.container.find(".bottom input[type=number]").val(),f=a.container.find(".bottom select").val();this.container.on("change",".bottom input",function(){e=jQuery(this).val(),b.bottom=e+f,a.setting.set(b),wp.customize.previewer.refresh()}),this.container.on("change",".bottom select",function(){f=jQuery(this).val(),b.bottom=e+f,a.setting.set(b),wp.customize.previewer.refresh()})}if(a.container.has(".left").size()){var g=a.container.find(".left input[type=number]").val(),h=a.container.find(".left select").val();this.container.on("change",".left input",function(){g=jQuery(this).val(),b.left=g+h,a.setting.set(b),wp.customize.previewer.refresh()}),this.container.on("change",".left select",function(){h=jQuery(this).val(),b.left=g+h,a.setting.set(b),wp.customize.previewer.refresh()})}if(a.container.has(".right").size()){var i=a.container.find(".right input[type=number]").val(),j=a.container.find(".right select").val();this.container.on("change",".right input",function(){i=jQuery(this).val(),b.right=i+j,a.setting.set(b),wp.customize.previewer.refresh()}),this.container.on("change",".right select",function(){j=jQuery(this).val(),b.right=i+j,a.setting.set(b),wp.customize.previewer.refresh()})}}}),wp.customize.controlConstructor["switch"]=wp.customize.Control.extend({ready:function(){var a=this,b=a.setting._value;this.container.on("change","input",function(){b=!!jQuery(this).is(":checked"),a.setting.set(b)})}}),wp.customize.controlConstructor.toggle=wp.customize.Control.extend({ready:function(){var a=this,b=a.setting._value;this.container.on("change","input",function(){b=!!jQuery(this).is(":checked"),a.setting.set(b)})}}),wp.customize.controlConstructor.typography=wp.customize.Control.extend({ready:function(){var a=this,b=a.selector+" .font-family select",c=a.selector+" .variant select",d=a.selector+" .subset select",e={};e["font-family"]=void 0!==a.setting._value["font-family"]?a.setting._value["font-family"]:"",e["font-size"]=void 0!==a.setting._value["font-size"]?a.setting._value["font-size"]:"",e.variant=void 0!==a.setting._value.variant?a.setting._value.variant:"",e.subset=void 0!==a.setting._value.subset?a.setting._value.subset:"",e["line-height"]=void 0!==a.setting._value["line-height"]?a.setting._value["line-height"]:"",e["letter-spacing"]=void 0!==a.setting._value["letter-spacing"]?a.setting._value["letter-spacing"]:"",e.color=void 0!==a.setting._value.color?a.setting._value.color:"";var f=function(b,f,g){subSelector="variant"==f?c:d;var h=!1,i={};void 0!==jQuery(subSelector).selectize()[0]&&jQuery(subSelector).selectize()[0].selectize.destroy();for(var j=0,k=kirkiAllFonts.length;k>j;j++)b===kirkiAllFonts[j].family&&(void 0!==kirkiAllFonts[j].is_standard&&!0===kirkiAllFonts[j].is_standard&&(h=!0),i=kirkiAllFonts[j][f+"s"]);if(!1===h||"subset"!==f){if(null===g){if("variant"==f)for(var j=0,k=i.length;k>j;j++)if(void 0!==i[j].id)var l=e.variant;else{var m="regular";if(m==i[j].id)var n=!0;else if(void 0===o)var o=i[j].id}else if("subset"==f){for(var p={},j=0,k=i.length;k>j;j++)if(null!==e.subset)for(var q=0,k=e.subset.length;k>q;q++)void 0!==i[j]&&e.subset[q]==i[j].id&&(p[e.subset[q]]=e.subset[q]);if(0==p.length)l=["latin"];else{var r=jQuery.map(p,function(a,b){return[a]});l=r}}subValue=void 0!==l?l:void 0!==n?"regular":o}else subValue=g;var s;s=jQuery(subSelector).selectize({maxItems:"variant"==f?1:null,valueField:"id",labelField:"label",searchField:["label"],options:i,items:"variant"==f?[subValue]:subValue,create:!1,plugins:"variant"==f?"":["remove_button"],render:{item:function(a,b){return"<div>"+b(a.label)+"</div>"},option:function(a,b){return"<div>"+b(a.label)+"</div>"}}}).data("selectize")}"variant"==f?1===i.length||0===i.length?a.container.find(".kirki-variant-wrapper").css("display","none"):a.container.find(".kirki-variant-wrapper").css("display","block"):"subset"==f&&(0===i.length?a.container.find(".kirki-subset-wrapper").css("display","none"):a.container.find(".kirki-subset-wrapper").css("display","block")),!0===h?a.container.find(".hide-on-standard-fonts").css("display","none"):a.container.find(".hide-on-standard-fonts").css("display","block")};jQuery(b).selectize({options:kirkiAllFonts,items:[a.setting._value["font-family"]],persist:!1,maxItems:1,valueField:"family",labelField:"label",searchField:["family","label","subsets"],create:!1,render:{item:function(a,b){return"<div>"+b(a.label)+"</div>"},option:function(a,b){return"<div>"+b(a.label)+"</div>"}}}),f(e["font-family"],"variant",e.variant),f(e["font-family"],"subset",e.subset),this.container.on("change",".font-family select",function(){e["font-family"]=jQuery(this).val(),a.setting.set(e),f(jQuery(this).val(),"variant",null),f(jQuery(this).val(),"subset",null),wp.customize.previewer.refresh()}),this.container.on("change",".variant select",function(){e.variant=jQuery(this).val(),a.setting.set(e),wp.customize.previewer.refresh()}),this.container.on("change",".subset select",function(){e.subset=jQuery(this).val(),a.setting.set(e),wp.customize.previewer.refresh()}),this.container.on("change keyup paste",".font-size input",function(){e["font-size"]=jQuery(this).val(),a.setting.set(e),wp.customize.previewer.refresh()}),this.container.on("change keyup paste",".line-height input",function(){e["line-height"]=jQuery(this).val(),a.setting.set(e),wp.customize.previewer.refresh()}),this.container.on("change keyup paste",".letter-spacing input",function(){e["letter-spacing"]=jQuery(this).val(),a.setting.set(e),wp.customize.previewer.refresh()});var g=this.container.find(".kirki-color-control");g.wpColorPicker({change:function(){setTimeout(function(){compiled_value.color=g.val(),a.setting.set(compiled_value),wp.customize.previewer.refresh()},100)}})}});
//# sourceMappingURL=customizer.min.js.map